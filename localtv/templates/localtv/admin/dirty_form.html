{% comment %}
# This file is part of Miro Community.
# Copyright (C) 2010 Participatory Culture Foundation
# 
# Miro Community is free software: you can redistribute it and/or modify it
# under the terms of the GNU Affero General Public License as published by
# the Free Software Foundation, either version 3 of the License, or (at your
# option) any later version.
# 
# Miro Community is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU Affero General Public License for more details.
# 
# You should have received a copy of the GNU Affero General Public License
# along with Miro Community.  If not, see <http://www.gnu.org/licenses/>.
{% endcomment %}
<script type="text/javascript" src="{{ STATIC_URL }}localtv/js/admin/jquery.dirtyform.js"></script>
<script type="text/javascript">
function setting_onunload(event) {
    if ($("form.saving").length) {
        return;
    }
    if ($("form input.changed").length) {
        unload_text = 'Your settings have not been saved.';
        if ($.browser.msie) {
            window.event.returnValue = event.returnValue = unload_text;
        } else if ($.browser.safari) {
            return 'Are you sure you want to navigate away from this page?\n\n' + unload_text;
        } else {
            return unload_text;
        }
    }
}
$(document).ready(function() {
    $("form").dirty_form().submit(function() {$(this).addClass('saving');});
});
</script>
